# 작업 인수인계: 소모품 다중 등록 및 AI 잔존 수명 예측

이 문서는 현재 환경(집)에서 개발된 내용을 학원 컴퓨터에서 이어서 작업하기 위해 작성되었습니다.

## 1. 현재 완료된 작업 (Status: DONE)

### [소모품 다중 등록 및 초기 추론 로직 구현]
- **DTO 수정**: `VehicleDto.RegistrationRequest`에 `List<ConsumableRegistrationRequest>` 추가 완료.
- **서비스 구현**: `VehicleService.registerVehicle` 호출 시 9종 전체 소모품에 대한 초기 데이터 생성 로직 구현 완료.
- **추론 로직 (Phase 1)**: 
    - 사용자가 입력하지 않은 항목은 **'현재 주행거리 % 표준 주기'** 모델을 통해 가장 최근의 가상 교체 시점을 계산함.
    - 날짜/거리 중 하나만 있을 경우 **연 15,000km(일 41km)** 주행 가설을 세워 누락된 값을 계산함.
    - 이를 통해 등록 즉시 모든 소모품의 잔존 수명이 0%가 아닌 유의미한 값으로 초기화됨.

## 2. 다음 단계 (Phase 2: AI 예측 고도화)

### [수정 대상 및 계획]
1. **AiWearFactorResponse 확장**:
    - 현재 AI 서버에서 가중치(`wear_factors`)만 오고 있는데, **'예측 수명(%)'** 항목도 받을 수 있게 필드 추가 필요.
2. **WearFactorService 로직 보정**:
    - AI가 계산한 정교한 수명(%) 값이 응답에 포함되어 있다면, 자바 수식 대신 해당 값을 최우선으로 적용하도록 수정.
3. **통합 진단 연동**:
    - `AiDiagnosisService`에서 진단 리포트 생성 시, 이 예측된 수명 데이터가 정확히 반영되는지 검증.

## 3. 관련 파일 위치
- **백엔드 DTO**: [VehicleDto.java](file:///c:/dev/AI/AI-5-main/backend/src/main/java/kr/co/himedia/dto/vehicle/VehicleDto.java)
- **백엔드 서비스**: [VehicleService.java](file:///c:/dev/AI/AI-5-main/backend/src/main/java/kr/co/himedia/service/VehicleService.java)
- **AI 연동 서비스**: [WearFactorService.java](file:///c:/dev/AI/AI-5-main/backend/src/main/java/kr/co/himedia/service/WearFactorService.java)
- **태스크 관리**: [9.현재-진행-태스크.md](file:///c:/dev/AI/AI-5-main/docs/9.현재-진행-태스크.md)
- **구현 계획서**: [10.구현-상세-계획서.md](file:///c:/dev/AI/AI-5-main/docs/10.구현-상세-계획서.md)

---
**Note**: 학원 컴퓨터에서 작업 시작 전 반드시 `git pull`을 수행하여 수정된 코드들을 내려받으시기 바랍니다.
