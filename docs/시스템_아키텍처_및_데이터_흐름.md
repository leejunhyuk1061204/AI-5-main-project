# ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ë° ë°ì´í„° íë¦„ ìƒì„¸ ì„¤ê³„ì„œ

> **ë¬¸ì„œ ë²„ì „**: v1.0
> **ê¸°ë°˜ ë¬¸ì„œ**: ê¸°ìˆ  êµ¬í˜„ ê°€ì´ë“œë¼ì¸
> **ì‘ì„±ì¼**: 2026-01-10

---

## 1. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ì˜¤ë²„ë·° (System Overview)

ë³¸ ì‹œìŠ¤í…œì€ ê³ í•´ìƒë„(1Hz) OBD-II ì°¨ëŸ‰ ë°ì´í„° ì²˜ë¦¬ì™€ ê³ ì—°ì‚°(High-Compute)ì´ í•„ìš”í•œ AI/LLM ì§„ë‹¨ì„ ë™ì‹œì— ìˆ˜í–‰í•˜ëŠ” í•˜ì´ë¸Œë¦¬ë“œ ì•„í‚¤í…ì²˜ë¥¼ ì±„íƒí•©ë‹ˆë‹¤.

### 1.1 High-Level Architecture Diagram

```mermaid
graph TD
    %% Client Layer (Top)
    subgraph Client_Layer["Client Layer"]
        direction TB
        OBD_Adapter[("OBD-II Adapter")]
        MobileApp[("Mobile App")]
        OBD_Adapter <== "ë¸”ë£¨íˆ¬ìŠ¤" ==> MobileApp
    end

    %% Backend Layer (Center Hub)
    subgraph Backend_Layer["Backend Layer"]
        direction TB
        Gateway["Main Backend<br/>(Java Spring Boot)"]
        MQ["Message Queue<br/>(RabbitMQ)"]
        Gateway -- "ì‘ì—… í• ë‹¹" --> MQ
    end

    %% Layer Connections (ì„œë¸Œê·¸ë˜í”„ ë°–ìœ¼ë¡œ ì´ë™)
    MobileApp -- "REST (Batch Upload)" --> Gateway

    %% Data Layer
    subgraph Data_Layer["Data Persistence Layer"]
        direction TB
        subgraph Postgres_Integrated["PostgreSQL Integrated"]
            direction TB
            RDB[("Relational DB")]
            TSDB[("Time-series DB")]
            VDB[("Vector DB")]
        end
        S3_Bucket[("AWS S3 Bucket")]
    end
    Gateway -- "ë¹„ì¦ˆë‹ˆìŠ¤ ë°ì´í„°" --> RDB
    Gateway -- "í…”ë ˆë©”íŠ¸ë¦¬ ê¸°ë¡" --> TSDB
    Gateway -- "ìœ ì‚¬ë„ ê²€ìƒ‰" --> VDB
    Gateway -- "íŒŒì¼ ì…ì¶œë ¥" --> S3_Bucket

    %% External & AI (Narrow Layout)
    subgraph External_Services["External Interfaces"]
        direction TB
        CloudAPI["Manufacturer API"]
        SearchAPI["Web Search API"]
        PushSvc["FCM (Push Notification)"]
    end
    
    MQ -- "ë°ì´í„° ë™ê¸°í™”" --> CloudAPI
    MQ -- "ì•Œë¦¼ ë°œì†¡ ì‘ì—…" --> PushSvc

    subgraph AI_Systems["AI Systems"]
        direction TB
        Orchestrator["AI Service<br/>(FastAPI)"]
        LLM_Agent["LLM Synthesis"]
    end

    MQ -- "ì‘ì—… êµ¬ë… ë° ë¶„ì„" --> Orchestrator
    Orchestrator -- "ë¯¸ë””ì–´ íšë“ / í•™ìŠµ" --> S3_Bucket
    Orchestrator -- "ë¶„ì„ ê²°ê³¼ ì—…ë°ì´íŠ¸" --> Gateway
    Gateway -- "í”„ë¡¬í”„íŠ¸ ë° ë¬¸ë§¥ ì „ë‹¬" --> LLM_Agent
    LLM_Agent -- "ì‹¤ì‹œê°„ ì§€ì‹ ê²€ìƒ‰" --> SearchAPI
```

---

## 2. ìƒì„¸ ì»´í¬ë„ŒíŠ¸ ëª…ì„¸ (Detailed Component Specification)

### 2.1 Client Layer (Mobile/Web)
- **Role**: ë°ì´í„° ìˆ˜ì§‘ì˜ ìµœì „ì„ ì´ì ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤.
- **Key Modules**:
    - **OBD Connector**: ELM327ê³¼ì˜ ë¸”ë£¨íˆ¬ìŠ¤ ì†Œì¼“ í†µì‹  ê´€ë¦¬. `AT Command` ì „ì†¡ ë° ì‘ë‹µ íŒŒì‹±. (Connection Keep-alive í•„ìˆ˜)
    - **Buffer Manager**: 1Hz ì£¼ê¸°ì˜ ê³ ë¹ˆë„ ë°ì´í„°ë¥¼ ë¡œì»¬ ë²„í¼ì— 3ë¶„ê°„ ì„ì‹œ ì €ì¥ í›„, HTTP POSTë¡œ ì¼ê´„ ì „ì†¡í•©ë‹ˆë‹¤. (ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë° ì œê±°)
    - **Local Lite-AI**: ë„¤íŠ¸ì›Œí¬ ë‹¨ì ˆ ì‹œ(Tunnel ë“±) ê¸°ë³¸ì ì¸ ì•ˆì „ ê²½ê³ (ê¸‰ë°œì§„, ê³¼ì—´)ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²½ëŸ‰í™”ëœ Rule-based ë¡œì§ ë‚´ì¥.

### 2.2 Backend Layer (Java Spring Boot)
- **Role**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ì²˜ë¦¬, ì‚¬ìš©ì ì¸ì¦, ë°ì´í„° ì˜ì†í™”, AI/ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ë™ì˜ ì¤‘ì¶”.
- **Function**: ëª¨ë“  ìš”ì²­ì˜ ì§„ì…ì (API Gateway)ì´ë©°, ë°°ì¹˜ë¡œ ìˆ˜ì‹ ëœ í…”ë ˆë©”íŠ¸ë¦¬ ë°ì´í„°ë¥¼ ê²€ì¦ ë° DBì— ì ì¬í•©ë‹ˆë‹¤.
- **Message Broker (RabbitMQ) í™œìš© ë²”ìœ„**:
    - **AI Task**: ì‹œê°„ì´ ì†Œìš”ë˜ëŠ” AI ì§„ë‹¨ ë° ì¶”ë¡  ì‘ì—… ë¶„ì‚° ì²˜ë¦¬.
    - **Push Notification**: FCMì„ í†µí•œ ëŒ€ëŸ‰ ì•Œë¦¼ ë°œì†¡ ì‹œ ì‘ë‹µ ì§€ì—° ë°©ì§€ ë° ì¬ì‹œë„ ê´€ë¦¬.
    - **Cloud Sync**: ì™¸ë¶€ ì œì¡°ì‚¬ API(Smartcar ë“±)ì™€ì˜ ë°ì´í„° ë™ê¸°í™” ì‘ì—… ë¹„ë™ê¸°í™”.
    - **Heavy Reports**: ëŒ€ìš©ëŸ‰ ì‹œê³„ì—´ ë°ì´í„°ë¥¼ ê°€ê³µí•˜ëŠ” ë¦¬í¬íŠ¸ ìƒì„± ì‘ì—… ë°±ê·¸ë¼ìš´ë“œ ì²˜ë¦¬.
- **Note**: ë°ì´í„° ì „ì†¡ ë° ì²˜ë¦¬ì˜ íš¨ìœ¨ì„±ì„ ìœ„í•´ 3ë¶„ ë‹¨ìœ„ ë°°ì¹˜ ì—…ë¡œë“œ ë°©ì‹ì„ ì‚¬ìš©í•˜ë©°, í•„ìš”í•œ ìƒíƒœëŠ” DBë¥¼ ì´ìš©í•©ë‹ˆë‹¤.

### 2.3 AI Systems (Integrated AI Services)
- **Role**: ë©€í‹°ëª¨ë‹¬ ë°ì´í„°(ì´ë¯¸ì§€, ìŒì„±, ì‹œê³„ì—´) ë¶„ì„ ë° ì§€ëŠ¥í˜• ê°€ì´ë“œ ìƒì„±.
- **Components**:
    - **AI Hub (Cloud GPU Service)**:
        - **Tech**: Python, FastAPI.
        - **Models**: YOLOv8-L (ì™¸ê´€), AST (ì—”ì§„ìŒ), LSTM-AE (OBD íŒ¨í„´) ì‹¤ì‹œê°„ ì¶”ë¡  ìˆ˜í–‰.
    - **openAI (Large Language Model)**:
        - **Model**: **GPT-4o**.
        - **Role**: AI Hubì˜ ë¶„ì„ ê²°ê³¼ì™€ OBD ë°ì´í„°ë¥¼ í•©ì„±í•˜ì—¬ ì‚¬ìš©ì ì¹œí™”ì ì¸ ì§„ë‹¨ ë¦¬í¬íŠ¸(`LLM Synthesis`) ìƒì„±.

### 2.4 PostgreSQL Integrated Instance (Data Persistence)
ë³¸ ì‹œìŠ¤í…œì€ **ë‹¨ì¼ PostgreSQL ì¸ìŠ¤í„´ìŠ¤**ì—ì„œ Extension ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬ ì„¸ ê°€ì§€ ë°ì´í„° ëª¨ë¸ì„ í†µí•© ê´€ë¦¬í•©ë‹ˆë‹¤.
- **ê´€ê³„í˜• í…Œì´ë¸” (Standard PostgreSQL)**:
    - ì‚¬ìš©ì ì •ë³´, ì°¨ëŸ‰ í”„ë¡œíŒŒì¼, ì§„ë‹¨ ì„¸ì…˜ ë° ìµœì¢… ë¦¬í¬íŠ¸ ë“± ì •í˜• ë°ì´í„° ì €ì¥.
- **ì‹œê³„ì—´ í…Œì´ë¸” (TimescaleDB Extension)**:
    - 1ì´ˆ ë‹¨ìœ„ë¡œ ìˆ˜ì§‘ë˜ëŠ” ëŒ€ëŸ‰ì˜ OBD í…”ë ˆë©”íŠ¸ë¦¬ ë°ì´í„°ë¥¼ í•˜ì´í¼í…Œì´ë¸”(Hypertables)ë¡œ ê´€ë¦¬. 3ì¼ ë³´ê´€ í›„ ìë™ ì‚­ì œ(Drop Chunk) ì •ì±… ì ìš©.
- **ë²¡í„° í…Œì´ë¸” (pgvector Extension)**:
    - ì°¨ëŸ‰ ì •ë¹„ ì§€ì‹ ë° ë§¤ë‰´ì–¼ì˜ ì„ë² ë”© ê°’ì„ ì €ì¥í•˜ì—¬ LLMì˜ RAG(ê²€ìƒ‰ ì¦ê°• ìƒì„±) ì†ŒìŠ¤ë¡œ í™œìš©.

### 2.5 Storage (Media Assets)
- **AWS S3 Bucket**:
    - **ëª©ì **: ì‚¬ìš©ìê°€ ì—…ë¡œë“œí•œ ì‚¬ê³ /ê³ ì¥ ì‚¬ì§„, ë…¹í™”ëœ ì—”ì§„ ì†Œë¦¬ íŒŒì¼, AI ì¬í•™ìŠµìš© ì›ë³¸ ë¡œê·¸ ì €ì¥.

### 2.6 External Interfaces
- **Manufacturer API**: ì œì¡°ì‚¬ í´ë¼ìš°ë“œ(BlueLink/KiaConnect ë“±)ë¥¼ í†µí•œ ì°¨ëŸ‰ ìƒíƒœ ë°ì´í„° ë™ê¸°í™”.
- **Search API (Tavily)**: ìˆ˜ë¦¬ ë°©ë²• ë° ë¶€í’ˆ ê°€ê²© ì •ë³´ë¥¼ ìœ„í•œ ì‹¤ì‹œê°„ ì›¹ ê²€ìƒ‰ ì—”ì§„ ì—°ë™.
- **Public Data Portal**: ì—”ì§„ ì˜¤ì¼ ê¶Œì¥ ì£¼ê¸°, ë¦¬ì½œ ì •ë³´ ë“± ê³µê³µ ì •ë³´ ì—°ë™.

---

## 3. í•µì‹¬ ë°ì´í„° íë¦„ ìƒì„¸ (Detailed Data Flow)

### 3.1 OBD-II ë°ì´í„° ìˆ˜ì§‘ ë° ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸ (Batch)
ì°¨ëŸ‰ ì‹œë™ ON ì‹œì ë¶€í„° ì•±ì´ ë°ì´í„°ë¥¼ ë¡œì»¬ì— 1ì´ˆ ë‹¨ìœ„ë¡œ ìˆ˜ì§‘(Buffering)í•˜ê³ , 3ë¶„ë§ˆë‹¤ ì„œë²„ë¡œ ì¼ê´„ ì „ì†¡í•˜ëŠ” íë¦„ì…ë‹ˆë‹¤.

```mermaid
sequenceDiagram
    autonumber
    participant Car as ğŸš— Vehicle (ECU)
    participant OBD as ğŸ”Œ OBD Dongle
    participant App as ğŸ“± App (Client)
    participant API as ğŸš€ API Gateway
    participant TSDB as â±ï¸ TimescaleDB

    Note over Car, App: [Phase 1] ì—°ê²° ë° í•¸ë“œì‰ì´í¬ (Start Drive)
    App->>OBD: ë¸”ë£¨íˆ¬ìŠ¤ ì—°ê²° ìš”ì²­
    OBD-->>App: ì—°ê²°ë¨
    App->>App: ì£¼í–‰ ì„¸ì…˜ ì‹œì‘ (Trip ID ìƒì„±)

    Note over Car, App: [Phase 2] ë¡œì»¬ ìˆ˜ì§‘ ë° ëª¨ë‹ˆí„°ë§ (1Hz)
    loop 1ì´ˆë§ˆë‹¤ ë°˜ë³µ (App Internal)
        App->>OBD: PID ìš”ì²­
        OBD-->>App: ì‘ë‹µ ë°ì´í„°
        App->>App: UI ê°±ì‹  & ì´ìƒ ì§•í›„ ì¦‰ì‹œ ì²´í¬ (Local Alert)
        App->>App: ë¡œì»¬ ë©”ëª¨ë¦¬ì— ë°ì´í„° Append
    end

    Note over App, TSDB: [Phase 3] ë°°ì¹˜ ì—…ë¡œë“œ (3ë¶„ ì£¼ê¸°)
    loop 3ë¶„ë§ˆë‹¤ ë°˜ë³µ
        App->>API: POST /telemetry/batch (180ê°œ ë¡œê·¸)
        activate API
        API->>TSDB: Bulk Insert (í•˜ì´í¼í…Œì´ë¸”)
        API-->>App: 200 OK
        deactivate API
    end

    Note over App, API: [Phase 4] ì£¼í–‰ ì¢…ë£Œ
    App->>API: ì£¼í–‰ ì¢…ë£Œ ì•Œë¦¼ (ë§ˆì§€ë§‰ ë°°ì¹˜ í¬í•¨)
    API->>TSDB: ì”ì—¬ ë°ì´í„° ì €ì¥
    API->>API: Trip Summary ìƒì„± task ë°œí–‰
```

### 3.2 AI ë©€í‹°ëª¨ë‹¬ ë³µí•© ì§„ë‹¨ í”„ë¡œì„¸ìŠ¤ (Link-based Diagnosis)
ì‚¬ìš©ìê°€ ì§„ë‹¨ì„ ìš”ì²­í–ˆì„ ë•Œ, ëŒ€ìš©ëŸ‰ íŒŒì¼ì€ S3ë¥¼ ê±°ì³ ì£¼ì†Œ ê¸°ë°˜ìœ¼ë¡œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

```mermaid
sequenceDiagram
    autonumber
    actor User
    participant App
    participant API as ğŸš€ Main Backend (Java)
    participant S3 as â˜ï¸ AWS S3
    participant AI as ğŸ§  AI Service (FastAPI)
    participant DB as ğŸ˜ PostgreSQL

    User->>App: "ì§„ë‹¨ ìš”ì²­" (ì‚¬ì§„/ìŒì„± + OBD ë°ì´í„°)
    App->>API: POST /diagnosis (Multipart File + JSON)
    
    Note over API, S3: [Step 1] ë°ì´í„° ì˜ì†í™” (ì¦ê±° ì €ì¥)
    API->>S3: ì›ë³¸ íŒŒì¼ ì €ì¥ (Upload)
    S3-->>API: S3_URL ë°˜í™˜
    
    Note over API, AI: [Step 2] ë©”íƒ€ë°ì´í„° ë¶„ì„
    API->>AI: ë¶„ì„ ìš”ì²­ (S3_URL + OBD Context)
    
    Note over AI: AI ë¶„ì„ ì¤‘
    AI->>S3: íŒŒì¼ ë‹¤ìš´ë¡œë“œ ë° ì¸í¼ëŸ°ìŠ¤
    AI-->>API: ë¶„ì„ ê²°ê³¼ JSON ë°˜í™˜ (ì´ìŠˆ íƒì§€ ê²°ê³¼ ë“±)
    
    Note over API, DB: [Step 3] ìµœì¢… ê²°ê³¼ í•©ì„±
    API->>API: LLM ë³´ê³ ì„œ í•©ì„± (AI ê²°ê³¼ + OBD + RAG)
    API->>DB: ì§„ë‹¨ ì„¸ì…˜ ë° ê²°ê³¼ ì €ì¥
    
    API-->>App: ì§„ë‹¨ ê²°ê³¼ (JSON) ë°˜í™˜
    App->>App: ì‚¬ìš©ì ê²°ê³¼ í™”ë©´ í‘œì‹œ
```

### 3.3 ì œì¡°ì‚¬ í´ë¼ìš°ë“œ ì—°ë™ (OAuth 2.0 Flow)
ì‚¬ìš©ìê°€ ì œì¡°ì‚¬ ê³„ì •ì„ ì—°ê²°í•˜ê³  ë°ì´í„°ë¥¼ ë™ê¸°í™”í•˜ëŠ” ë³´ì•ˆ íë¦„ì…ë‹ˆë‹¤.

```mermaid
sequenceDiagram
    autonumber
    actor User
    participant App
    participant API as ğŸš€ Main Backend
    participant Auth as ğŸ›ï¸ Manufacturer Auth
    participant DB as ğŸ˜ PostgreSQL (cloud_accounts)

    User->>App: "ì œì¡°ì‚¬ ê³„ì • ì—°ê²°" ì„ íƒ
    App->>API: POST /cloud/connect (Provider ì„ íƒ)
    API-->>App: ì¸ì¦ URL ë°˜í™˜ (Client ID, Scope í¬í•¨)
    
    App->>Auth: ì›¹ë·°ì—ì„œ ì œì¡°ì‚¬ ë¡œê·¸ì¸/ë™ì˜
    Auth-->>App: ì¸ì¦ ì½”ë“œ(Authorization Code) ì „ë‹¬
    
    App->>API: POST /cloud/callback (Code ì „ë‹¬)
    
    API->>Auth: í† í° êµí™˜ (Code <-> Tokens)
    Auth-->>API: ì•¡ì„¸ìŠ¤ ë° ë¦¬í”„ë ˆì‹œ í† í° ë°˜í™˜
    
    Note over API, DB: [ë³´ì•ˆ] AES-256 ì•”í˜¸í™”
    API->>API: í† í° ì•”í˜¸í™” ì²˜ë¦¬
    API->>DB: ì•”í˜¸í™”ëœ í† í°(encrypted_tokens) ì €ì¥
    
    API-->>App: ì—°ë™ ì™„ë£Œ ì•Œë¦¼
```

### 3.4 ì†Œëª¨í’ˆ ì˜ˆì§€ ì •ë¹„ ë° ë°°ì¹˜ ë¶„ì„ (Predictive Maintenance Batch)
ë§¤ì¼ ë°¤ ìˆ˜í–‰ë˜ëŠ” ëŒ€ê·œëª¨ ë°ì´í„° ë¶„ì„ ë° ì˜ˆì¸¡ íŒŒì´í”„ë¼ì¸ì…ë‹ˆë‹¤.

```mermaid
flowchart TD
    trigger((ê°œì¸ë³„ ë¹„ìš´í–‰ ì‹œê°„<br/>ë°°ì¹˜ íŠ¸ë¦¬ê±°)) --> BatchJob["ì¼ì¼ ì˜ˆì¸¡ ë°°ì¹˜ ì‘ì—…"]
    
    subgraph Data_Preparation ["ë°ì´í„° ì¤€ë¹„"]
        BatchJob --> FetchData["PostgreSQL: ìµœê·¼ 30ì¼ ë°ì´í„° ì¶”ì¶œ"]
        BatchJob --> FetchRaw["TimescaleDB: ìµœê·¼ 3ì¼ ë¡œìš° íŒŒí˜• ì¶”ì¶œ"]
        FetchData & FetchRaw --> Preprocess["ë°ì´í„° ì „ì²˜ë¦¬ ë° íŠ¹ì§• ì¶”ì¶œ<br/>(ì¶”ì„¸, ë³€ë™ì„± ë“±)"]
    end
    
    subgraph AI_Inference ["AI ëª¨ë¸ ì¶”ë¡ "]
        Preprocess --> XGBoost["XGBoost íšŒê·€ ëª¨ë¸<br/>(ì†Œëª¨í’ˆ ì”ì—¬ ìˆ˜ëª… ì˜ˆì¸¡)"]
        Preprocess --> LSTM["LSTM ì´ìƒ ê°ì§€ ëª¨ë¸<br/>(ë°°í„°ë¦¬/ì‹œë™ ì „ì•• ë¶„ì„)"]
    end
    
    subgraph Evaluation_Action ["íŒë‹¨ ë° í›„ì† ì¡°ì¹˜"]
        XGBoost --> CheckLife{ì”ì—¬ ìˆ˜ëª… < 10%?}
        LSTM --> CheckDanger{ê³ ì¥ í™•ë¥  > 80%? }
        
        CheckLife -- ì˜ˆ --> CreateNoti1["ì•Œë¦¼ ìƒì„±<br/>'ì—”ì§„ì˜¤ì¼ êµì²´ ì£¼ê¸° ë„ë˜'"]
        CheckLife -- ì•„ë‹ˆì˜¤ --> UpdateStatus1["í˜„ì¬ ìƒíƒœ DB ì—…ë°ì´íŠ¸"]
        
        CheckDanger -- ì˜ˆ --> CreateNoti2["ì¹˜ëª…ì  ì•Œë¦¼ ìƒì„±<br/>'ë°°í„°ë¦¬ ë°©ì „ ì„ë°•'"]
        CheckDanger -- ì•„ë‹ˆì˜¤ --> UpdateStatus2["ì¸í¼ëŸ°ìŠ¤ ê²°ê³¼ ë¡œê·¸ ì €ì¥"]
    end
    
    CreateNoti1 & CreateNoti2 --> PushServer["FCM í‘¸ì‹œ ì„œë²„"]
    UpdateStatus1 & UpdateStatus2 --> DB[(PostgreSQL)]

```

---

## 4. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ì„¤ê³„ (Extended ERD)

ê¸°ë³¸ì ì¸ ì‚¬ìš©ì/ì°¨ëŸ‰ ì •ë³´ ì™¸ì—, **ì‹œê³„ì—´ ë°ì´í„° ìµœì í™”**ì™€ **AI ì§„ë‹¨ ì´ë ¥** ê´€ë¦¬ì— ì´ˆì ì„ ë§ì¶˜ í™•ì¥ ì„¤ê³„ì…ë‹ˆë‹¤.

### 4.1 ê°„ëµ ERD (Simplified ERD)

> [!NOTE]
> ë³¸ ë‹¤ì´ì–´ê·¸ë¨ì€ ì‹œìŠ¤í…œì˜ ì „ì²´ì ì¸ ê´€ê³„ë¥¼ íŒŒì•…í•˜ê¸° ìœ„í•œ **ê°„ëµ ë²„ì „**ì…ë‹ˆë‹¤. ê° ì»¬ëŸ¼ì˜ ë°ì´í„° íƒ€ì…, ì œì•½ ì¡°ê±´, Enum ê°’ ë“± ìƒì„¸í•œ ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ ì •ë³´ëŠ” [ë°ì´í„°ë² ì´ìŠ¤ ìƒì„¸ ì„¤ê³„ì„œ (DB_ì„¤ê³„ì„œ.md)](file:///c:/dev/AI/AI-5-main/Docs/DB_ì„¤ê³„ì„œ.md)ë¥¼ ì°¸ì¡°í•˜ì‹­ì‹œì˜¤.

![ê°„ëµ ERD](file:///c:/dev/AI/AI-5-main/Docs/erd_detailed.png)

---

## 5. ë³´ì•ˆ ë° ë„¤íŠ¸ì›Œí¬ ì„¤ê³„ (Security & Network)

### 5.1 ë„¤íŠ¸ì›Œí¬ ì•„í‚¤í…ì²˜
- **Private Subnet ì›ì¹™**: DB(PostgreSQL, TimescaleDB)ì™€ AI Inference ServerëŠ” ì™¸ë¶€ì—ì„œ ì§ì ‘ ì ‘ê·¼í•  ìˆ˜ ì—†ëŠ” Private Subnetì— ë°°ì¹˜.
- **Bastion Host / VPN**: ê´€ë¦¬ì ì „ìš© ì ‘ê·¼ í†µë¡œ.
- **TLS 1.3**: ëª¨ë“  êµ¬ê°„(App-Server, Server-DB)ì— ì•”í˜¸í™” í†µì‹  ì ìš©.

### 5.2 ë°ì´í„° ë³´ì•ˆ
- **VIN & PII ì•”í˜¸í™”**: `AES-256-GCM` ì•Œê³ ë¦¬ì¦˜ì„ ì‚¬ìš©í•˜ì—¬ DB ì €ì¥ ì‹œ ì•”í˜¸í™”. (Key Management System í™œìš© ê¶Œì¥).
- **ë°ì´í„° ë¹„ì‹ë³„í™”**: AI í•™ìŠµìš©ìœ¼ë¡œ S3ë¡œ ì´ê´€ë˜ëŠ” ë°ì´í„°ëŠ” `user_id`, `vin` ë“±ì„ ì œê±°í•˜ê±°ë‚˜ Hashing ì²˜ë¦¬í•˜ì—¬ ì €ì¥.

---
**[ë¬¸ì„œ ë]**
