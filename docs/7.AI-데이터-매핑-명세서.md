# 7. AI 기능별 데이터 매핑 명세서

본 문서는 시스템에서 구현되는 각 AI 기능이 정확한 분석을 위해 필요로 하는 OBD(현장 데이터) 및 하이모빌리티(클라우드 데이터) 항목을 정의합니다.

---

## 1. 엔진 이상 징후 감지 (LSTM)
*엔진의 실시간 시계열 데이터를 분석하여 정상 범위를 벗어나는 패턴을 포착합니다.*

| 데이터 소스 | 데이터 항목 | 설명 | 수집 목적 |
|:---|:---|:---|:---|
| OBD | **RPM** | 엔진 회전수 | 엔진 부하 및 회전 안정성 모니터링 |
| OBD | **Engine Load** | 엔진 부하 | 주행 상황별 엔진의 실제 작업량 분석 |
| OBD | **Coolant Temp** | 냉각수 온도 | 과열 여부 및 열적 사이클 분석 |
| OBD | **Fuel Trim** | 연료 보정 (S/L) | 혼합비 이상(흡기 누설, 인젝터 문제) 감지 |
| OBD | **MAP/MAF** | 흡기압 / 공기량 | 엔진 출력 효율 및 센서 정합성 체크 |

---

## 2. 소모품 진단 핵심 지표 분리 (Logic)
*AI는 운전 습관을 '마모 가중치'로 치환하고, 이를 바탕으로 '잔존 수명'을 도출합니다.*

### 2.1 운전 습관 기반 마모 가중치 (`wear_factor`) [LSTM]
- **정의**: 표준 주행 대비 부품이 소모되는 속도 (예: 급감속이 잦으면 브레이크 마모 가중치 1.2배)
- **분석 데이터**: 시계열 가감속(Speed), 엔진 부하(Load), 변속 패턴(RPM) 등

### 2.2 실시간 잔존 수명 (`remaining_life`) [Hybrid]
- **정의**: (표준 교체 주기 / 마모 가중치) - 마지막 교체 후 주행 거리
- **분석 데이터**: Odometer(HM), Wear Factor(AI), Last Replaced Mileage(Initial)

---

## 3. 소모품별 AI 데이터 매핑 (LSTM / XGBoost Hybrid)
*시동 전압 및 내부 제어기 상태를 분석합니다.*

| 데이터 소스 | 데이터 항목 | 설명 | 수집 목적 |
|:---|:---|:---|:---|
| OBD | **Battery Voltage** | 배터리/ECU 전압 | 시동 시 전압 강하량 측정 (수명 예측) |
| Cloud (HM) | **Battery SoC** | 배터리 충전 상태 | 방전 위험 알림 및 충전 주기 분석 |
| Cloud (HM) | **Battery SoH** | 배터리 건강 상태 | (EV/HEV) 배터리 노화 가중치 적용 |

---

## 4. 차량 관리 및 안전 (LLM 보고서)
*차량의 전반적인 상태를 종합하여 사용자 맞춤형 가이드를 생성합니다.*

| 데이터 소스 | 데이터 항목 | 설명 | 수집 목적 |
|:---|:---|:---|:---|
| Cloud (HM) | **Doors/Windows** | 문/창문 상태 | 주행 종료 후 열림 방지 및 보안 알림 |
| Cloud (HM) | **Fuel Level** | 연료 잔량 | 주유소 추천 및 주행 패턴별 연비 분석 |
| Cloud (HM) | **Maintenance List** | 정비 필요 항목 | 제조사 공식 권장 점검 항목 데이터베이스화 |
| OBD | **DTC Info** | 고장 코드 이력 | 전문가용 진단 가이드(RAG 연동) 생성 |

---

> [!IMPORTANT]
> **통합 피처 엔진 기반 AI 진단 (Unified Feature Strategy)**
> 본 시스템은 OBD와 하이모빌리티 데이터를 별도로 처리하지 않고, **하나의 거대한 피처 벡터(Feature Vector)**로 통합하여 AI 모델에 활용합니다.
> 
> 1. **통합 분석**: 실시간 동적 데이터(OBD)와 공식 정적 데이터(HM)를 교차 분석하여 분석의 신뢰도를 높입니다.
> 2. **우선순위 엔진**: 동일한 정보(예: Odometer)가 양쪽에서 수집될 경우, 데이터의 정확도와 최신성을 고려하여 시스템이 최적의 값을 자동으로 선택하여 AI 모델에 공급합니다.
> 3. **멀티모달 확장**: 향후 사진, 소리 데이터까지 이 통합 피처 엔진에 포함하여 주행 환경과 차량 상태를 입체적으로 분석합니다.
