# 백엔드 요구사항 정의서 검토 보고서

**검토 대상**: `docs/백엔드_요구사항정의서.md`
**참고 문서**: 
1. `docs/1.요구사항정의서.md` (SRS)
2. `docs/5.WBS.md` (일정)
3. `docs/6.MENTORING.md` (진척도)

---

## 1. 전체적인 검토 의견 (Summary)

**결론: 재작성 불필요. "수정(Update)" 및 "항목 추가" 권장.**

현재 `백엔드_요구사항정의서.md`는 프로젝트의 핵심 기능(인증, 차량, 데이터 수집, AI 진단)을 기술적으로 매우 잘 상세화하고 있습니다. 전면적인 재작성은 불필요하며, SRS(요구사항정의서)에 있는 **확장 기능(EV, OCR)**에 대한 명세 추가와 **개발 진행 상황(Status)** 현행화가 필요합니다.

---

## 2. 주요 발견 사항 및 수정 제안

### 2.1 SRS 요구사항와의 정합성 (Alignment with SRS)
SRS(`1.요구사항정의서.md`)에는 존재하나 백엔드 정의서에 구체적이지 않은 항목들을 보강해야 합니다.

| SRS 항목 | 백엔드 정의서 현황 | 조치 제안 |
|:---|:---|:---|
| **REQ-EV-01** (EV/HEV 지원) | `BE-VH`: 유종 컬럼 존재<br>`BE-TD`: 구체적 로직 없음 | **[추가]** `BE-TD-008` (EV 배터리 데이터 처리) 항목 추가 필요. (SoC, BMS 온도 등 특수 데이터 파싱) |
| **REQ-EXT-02** (영수증 OCR) | `BE-MT-001` (정비 이력)만 존재 | **[확인 필요]** OCR이 프론트엔드 처리 후 텍스트만 넘어오는지, 백엔드에서 이미지를 받아 처리하는지 명시 필요. (백엔드 처리 시 `BE-MT-003` 추가) |
| **REQ-AI-06** (추가 증거 요청) | `BE-AI-016` (멀티턴 대화)로 커버 가능 | **[수정]** `BE-AI-016` 설명을 "추가 증거(사진/소리) 요청을 위한 멀티턴 처리"로 구체화 권장. |

### 2.2 WBS 및 멘토링 문서와의 동기화 (Sync with WBS)
WBS상 2~3주차, 4주차 과제들이 백엔드 정의서에 기술되어 있습니다. 현재 개발 진행 속도가 빠르므로 상태값 현행화가 필요합니다.

- **AI 리포트 저장 (`BE-AI-014`)**: WBS 4주차 핵심 과제입니다. 현재 `[ ]` 상태이나, `REQ-USER-04`(주행 리포트) 완성을 위해 가장 시급한 항목입니다. **우선순위 상향** 필요.
- **알림 시스템 (`BE-NT`)**: WBS 2주차 항목이나 `BE-NT-001`이 아직 `[ ]`입니다. FCM 토큰 로직(`BE-AU-004`)은 구현되었으므로 구현 가능 상태입니다.

---

## 3. 세부 수정 제안 (Action Items)

`백엔드_요구사항정의서.md` 파일에 대해 다음 수정을 제안합니다.

### A. 누락된 기능 항목 추가 (Additions)
**2.3 텔레메트리 파이프라인** 섹션에 추가:
```markdown
- [ ] **BE-TD-008** [P] EV 데이터 처리: BMS(배터리 관리 시스템) 데이터 파싱 및 SoC/SOH 저장 로직
```

**2.6 소모품 및 알림** 섹션에 추가 (OCR이 백엔드 역할일 경우):
```markdown
- [ ] **BE-MT-003** [C] 영수증 OCR 분석: Naver Clova/Google Vision API 연동 및 정비 항목 추출
```

### B. 상태값 현행화 (Status Update)
코드 확인 결과 이미 구현된 것으로 보이는 항목들의 상태를 `[x]` 또는 `[/]`로 업데이트해야 합니다.
- **BE-SY-003** (에러 로깅): `GlobalExceptionHandler`가 구현되어 있으므로 `[x]`로 변경.
- **BE-VH-004** (차량 목록): `VehicleController` 등을 확인했을 때 구현됨. `[x]`.

### C. 용어 통일
- SRS의 **"선택적 EDR 보관"** (`REQ-DATA-03`) 용어를 백엔드 문서의 **"데이터 리텐션"** (`BE-TD-006`) 설명에 포함시켜 목적을 명확히 할 것.
