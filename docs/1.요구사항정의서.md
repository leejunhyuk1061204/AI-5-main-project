# 요구사항 정의서 (SRS)

> **문서 개요**: 본 문서는 `설계_메모장.md`를 기반으로 기술적 요구사항을 상세히 정의한 문서입니다.
> **작성 원칙**: 상단에 전체 요약 표를 제공하고, 하단에 각 요구사항의 상세 내용을 토글(Toggle) 형태로 기술합니다.

## 0. 전체 요구사항 요약 (Summary Table)

| ID | 요구사항 명칭 | 핵심 기술 및 정책 | 우선순위 |
|:---|:---|:---|:---:|
| **REQ-DATA-01** | **OBD 데이터 수집** | 백그라운드 수집, 배터리 최적화 | 🔴 필수 |
| **REQ-DATA-02** | **안정적 데이터 전송** | 끊김 시 자동 재전송 (속도보다 안전성) | 🔴 필수 |
| **REQ-DATA-03** | **선택적 EDR 보관** | 이상 징후 구간만 영구 보관 (비용 절감) | 🔴 필수 |
| **REQ-DATA-04** | **외부 데이터 연동** | 제조사 클라우드 데이터 동기화 | 🟡 보통 |
| **REQ-AI-01** | **정밀 진단** | 주행 종료 후 정밀 분석 | 🔴 필수 |
| **REQ-AI-02** | **고장 전조 탐지** | 시계열 AI 기반 평소 패턴 학습 및 이상 징후 감지 | 🔴 필수 |
| **REQ-AI-03** | **고장 코드 음성 알림** | 중요 고장 발생 시 즉시 음성 안내 | 🔴 필수 |
| **REQ-AI-04** | **수동 정밀 진단** | 소리/사진 + 과거 이력 교차 검증 | 🟡 보통 |
| **REQ-AI-06** | **추가 증거 요청** | 정보 부족 시 AI가 추가 질문/사진 요청 | 🔴 필수 |
| **REQ-AI-07** | **쉬운 정비 리포트** | 초보자도 이해하기 쉬운 친절한 설명 | 🔴 필수 |
| **REQ-USER-01** | **차량 등록** | 자동(OBD 연결) / 수동(직접 선택) 등록 | 🔴 필수 |
| **REQ-USER-02** | **소모품 수명 예측** | 운전 습관에 따른 개인화 수명 예측 | 🔴 필수 |
| **REQ-USER-03** | **디지털 차계부** | 정비 내역 수동 기록 및 AI 연동 | 🟡 보통 |
| **REQ-USER-04** | **주행 리포트** | 주행 종료 즉시 안전/정비 종합 리포트 생성 | 🔴 필수 |
| **REQ-SYS-01** | **OBD 기기 바인딩** | 타인 연결 방지 (기기 1:1 잠금) | 🔴 필수 |
| **REQ-EV-01** | **EV/HEV 지원** | 전기차 배터리(SOH, BMS) 진단 | 🟢 낮음 |
| **REQ-EXT-02** | **영수증 OCR 입력** | 영수증 촬영으로 정비 내역 자동 등록 | 🟢 낮음 |

---

## 1. 데이터 수집 및 관리 (DATA)

<details>
<summary><b>[REQ-DATA-01] OBD 데이터 수집</b></summary>

### 1. 기본 정보 (Metadata)
- **ID**: REQ-DATA-01
- **분류**: 기능(Functional)
- **우선순위**: 필수(High)

### 2. 상세 내용 (Description)
- **요구사항 명칭**: OBD 데이터 수집
- **상세 설명**: 차량 시동이 켜지고 블루투스(OBD)가 연결되면, 사용자 개입이나 화면 켜짐 없이 백그라운드에서 주행 데이터를 수집합니다.
- **입력 데이터**: OBD-II Stream (RPM, Speed, Load, Battery Voltage, Fuel Trim 등)
- **출력 데이터**: 시간순으로 정렬된 주행 로그 파일

### 3. 검증 기준 (Acceptance Criteria)
- 앱이 **Background** 상태로 전환되어도 로컬 로그 파일에 데이터가 1초 간격으로 계속 기록되는지 확인.
- 화면이 꺼진(Off) 상태에서 장시간 주행 시에도 OS에 의해 종료되지 않고 안정적으로 수집되어야 함.
</details>

<details>
<summary><b>[REQ-DATA-02] 안정적 데이터 전송 (Reliable Transmission)</b></summary>

### 1. 기본 정보 (Metadata)
- **ID**: REQ-DATA-02
- **분류**: 기능(Functional)
- **우선순위**: 필수(High)

### 2. 상세 내용 (Description)
- **요구사항 명칭**: 안정적 데이터 전송
- **상세 설명**: 주행 중 인터넷이 끊겨도(터널, 지하 등) 기록이 사라지지 않도록 임시 저장했다가, 연결이 복구되면 자동으로 서버에 보냅니다.
- **입력 데이터**: 전송 대기 중인 주행 로그
- **출력 데이터**: 서버 전송 완료 상태

### 3. 검증 기준 (Acceptance Criteria)
- **네트워크 단절 테스트**: WiFi/LTE를 끄고 5분 주행 후 재연결 시, 임시 저장된 주행 데이터가 순차적으로 서버에 전송되어야 함.
- **중복 방지**: 동일한 데이터가 재전송되어도 서버에는 중복 없이 한 번만 저장되는지 확인.
</details>

<details>
<summary><b>[REQ-DATA-03] 선택적 EDR 보관 (Selective Storage)</b></summary>

### 1. 기본 정보 (Metadata)
- **ID**: REQ-DATA-03
- **분류**: 기능/정책
- **우선순위**: 필수(High)

### 2. 상세 내용 (Description)
- **요구사항 명칭**: 선택적 EDR 보관
- **상세 설명**: 저장 비용 효율화를 위해 모든 데이터를 무조건 저장하지 않고 선별적으로 보관합니다. 사고나 고장 같은 '특이 이벤트'는 필수로 저장하며, **평범한 주행 데이터도 추후 정할 기준(예: 학습용 샘플링)에 따라 선별하여 저장**합니다.
- **입력 데이터**: 주행 로그 스트림
- **출력 데이터**: 선별된 저장 파일

### 3. 검증 기준 (Acceptance Criteria)
- **보관 정책 검증**: '급격한 전압 강하(Voltage Drop)' 같은 고장 전조가 기록된 구간은 별도로 영구 보관되는지 확인.
- **선별 저장 검증**: 정상 주행일지라도 설정된 기준(미정)에 부합하는 데이터는 삭제되지 않고 보관되는지 확인.
</details>

<details>
<summary><b>[REQ-DATA-04] 외부 데이터 연동 (External Sync)</b></summary>

### 1. 기본 정보 (Metadata)
- **ID**: REQ-DATA-04
- **분류**: 기능(Functional)
- **우선순위**: 보통(Normal)

### 2. 상세 내용 (Description)
- **요구사항 명칭**: 외부 데이터 연동 (Manufacturer Cloud)
- **상세 설명**: OBD만으로는 알기 힘든 정보(총 주행거리, 외부 온도 등)를 제조사 서버에서 가져와 데이터의 정확도를 높입니다.
- **입력 데이터**: 사용자 차량 계정 연동
- **출력 데이터**: 보정된 차량 정보
- **검증 기준**: OBD 미연결 상태에서 **제조사(High Mobility) 연동 시**, 콘솔(시뮬레이터)의 차량 주행거리와 우리 앱의 주행거리가 일치하게 갱신되는지 확인.
</details>

## 2. AI 진단 및 분석 (AI)

<details>
<summary><b>[REQ-AI-01] 정밀 진단 (Post-Trip Analysis)</b></summary>

### 1. 기본 정보 (Metadata)
- **ID**: REQ-AI-01
- **분류**: 기능(Functional)
- **우선순위**: 필수(High)

### 2. 상세 내용 (Description)
- **요구사항 명칭**: 정밀 진단 (Post-Trip Analysis)
- **상세 설명**: 주행이 끝나면 전체 데이터를 AI가 꼼꼼히 분석하여, 운전 중에 미처 발견하지 못한 문제가 있었는지 확인합니다.
- **입력 데이터**: 주행 종료된 세션 데이터
- **출력 데이터**: 정밀 분석 리포트

### 3. 검증 기준 (Acceptance Criteria)
- 주행 종료 이벤트 발생 후 **5분 이내**에 '분석 완료' 푸시 알림이 발송되어야 함.
- 고장 시뮬레이터(임의 데이터 조작)로 이상 데이터를 넣었을 때, 분석 결과가 **'이상(Anomaly)'**으로 명확히 판정되어야 함.
</details>

<details>
<summary><b>[REQ-AI-02] 고장 전조 탐지 (Precursor Detection)</b></summary>

### 1. 기본 정보 (Metadata)
- **ID**: REQ-AI-02
- **분류**: 기능(Functional)
- **우선순위**: 필수(High)

### 2. 상세 내용 (Description)
- **상세 설명**: 평소 주행 패턴을 학습한 AI가, 배터리 전압이 서서히 약해지거나 갑자기 튀는 것과 같은 이상 징후를 알아냅니다. 단순히 '수치가 낮다'는 기준이 아니라, 여러 데이터를 종합적으로 보고 **비정상 원인(Contributing Factors)**까지 찾아냅니다.
- **입력 데이터**: 시계열 센서 데이터 (전압, 온도가 포함된 벡터)
- **출력 데이터**: 이상 징후 여부(Anomaly), 원인 요소 - 예: "전압 불안정"

### 3. 검증 기준 (Acceptance Criteria)
- 단순 전압 저하가 아닌, 배터리 부하와 전압의 상관관계가 깨지는 'Battery Sag' 현상을 탐지해내는지 확인.
- 이상 감지 시, 단순히 "이상함"이 아니라 **"전압(Voltage) 패턴 이상"**과 같이 구체적인 원인이 함께 출력되는지 확인.
</details>

<details>
<summary><b>[REQ-AI-03] 고장 코드 음성 알림 (TTS Alert)</b></summary>

### 1. 기본 정보 (Metadata)
- **ID**: REQ-AI-03
- **분류**: 기능(Functional)
- **우선순위**: 필수(High)

### 2. 상세 내용 (Description)
- **요구사항 명칭**: 고장 코드 음성 알림 (TTS Alert)
- **상세 설명**: 운전 중 **고장 코드(DTC) 경고**가 발생하면, 화면을 안 봐도 알 수 있게 음성으로 경고합니다. 발생한 모든 알림은 사라지지 않고 **'진단 이력' 메뉴에서 나중에 다시 확인**할 수 있어야 합니다.
- **입력 데이터**: 실시간 고장 코드
- **출력 데이터**: 음성 경고 메시지 및 저장된 알림 이력

### 3. 검증 기준 (Acceptance Criteria)
- **Latency**: 긴급 DTC 코드 주입 시, **3초 이내**에 TTS 음성 출력이 시작되어야 함.
- **이력 저장**: 경고 발생 후 '진단 이력' 메뉴에 해당 고장 내용과 발생 시각이 정확히 기록되는지 확인.
- **Audio Focus**: 음악 재생 중일 경우, 음악 볼륨이 줄어들고 경고 음성이 명확히 들려야 함.
</details>

<details>
<summary><b>[REQ-AI-04] 수동 정밀 진단 (Interactive Diagnosis)</b></summary>

### 1. 기본 정보 (Metadata)
- **ID**: REQ-AI-04
- **분류**: 기능(Functional)
- **우선순위**: 필수(High)

### 2. 상세 내용 (Description)
- **요구사항 명칭**: 수동 정밀 진단 (Interactive Diagnosis)
- **상세 설명**: 사용자가 찍은 소리나 사진을 과거 주행 기록과 함께 분석합니다. **채팅 형태의 인터페이스**를 통해 AI와 대화하며, 소리만으로는 알 수 없는 심층적인 원인을 찾아냅니다. 문진(Interview)을 통해 증상을 구체화합니다.
- **입력 데이터**: 사진, 소리 파일, 사용자 입력 텍스트, 최근 주행 이력
- **출력 데이터**: 대화형 AI 응답 및 최종 종합 진단 리포트

### 3. 검증 기준 (Acceptance Criteria)
- **대화형 응답**: 사용자가 "엔진에서 소리가 나요"라고 입력하면 AI가 "어떤 종류의 소리인가요?"와 같이 구체적인 질문을 반환하는지 확인.
- **멀티모달 통합**: 소리 녹음 파일 업로드 시, AST 모델 분석 결과와 사용자의 증상 설명을 결합하여 진단을 수행하는지 확인.
- 최종 리포트에 진단 근거(Evidence)와 정비 가이드가 포함되어야 함.
</details>

<details>
<summary><b>[REQ-AI-06] 정밀 진단 가이드 (Guided Diagnosis)</b></summary>

### 1. 기본 정보 (Metadata)
- **ID**: REQ-AI-06
- **분류**: 기능(Functional)
- **우선순위**: 보통(Normal)

### 2. 상세 내용 (Description)
- **요구사항 명칭**: 정밀 진단 가이드
- **상세 설명**: AI가 판단하기에 데이터가 부족할 경우, 단순 추측을 하는 대신 정확한 진단을 위해 필요한 **추가 행동(사진 촬영, 특정 부위 소리 녹음, 육안 점검 등)을 가이드**로 제시합니다. 'AI 챗봇'이 이 과정을 주도합니다.
- **입력 데이터**: 정보 부족이 확인된 1차 분석 결과
- **출력 데이터**: 사용자 행동 지침 (버튼, 체크리스트 등)

### 3. 검증 기준 (Acceptance Criteria)
- AI 판단 근거가 부족할 경우 "정확한 확인을 위해 엔진룸 우측의 배선을 촬영해주세요"와 같은 **구체적인 행동 지시**가 생성되어야 함.
- 채팅방 내에서 사진/음성 파일 업로드를 즉시 수행할 수 있는 **UI 액션**이 제공되어야 함.
</details>

<details>
<summary><b>[REQ-AI-07] 쉬운 정비 리포트</b></summary>

### 1. 기본 정보 (Metadata)
- **ID**: REQ-AI-07
- **분류**: 기능(Functional)
- **우선순위**: 필수(High)

### 2. 상세 내용 (Description)
- **요구사항 명칭**: 쉬운 정비 리포트
- **상세 설명**: 어려운 정비 용어(P0300 등) 대신, 일반 운전자가 이해하기 쉬운 말로 바꿔줍니다. 마치 친절한 정비사가 설명해주는 것처럼 "무엇이 문제이고, 당장 무엇을 해야 하는지" 알려줍니다.
- **입력 데이터**: 기술적 진단 결과
- **출력 데이터**: 사용자 친화적 리포트

### 3. 검증 기준 (Acceptance Criteria)
- 생성된 리포트 텍스트 내에 알파벳 코드로 된 에러 코드(P0xxx)나 전문 용어가 그대로 노출되지 않아야 함. (예외: 상세 보기 클릭 시 노출 허용)
- "정비소에 가서 ~라고 말하세요"와 같은 구체적인 행동 가이드(Action Item)가 포함되어 있는지 확인.
</details>



## 3. 사용자 및 차량 관리 (USER)

<details>
<summary><b>[REQ-USER-01] 차량 등록</b></summary>

### 1. 기본 정보 (Metadata)
- **ID**: REQ-USER-01
- **분류**: 기능(Functional)
- **우선순위**: 필수(High)

### 2. 상세 내용 (Description)
- **요구사항 명칭**: 차량 등록
- **상세 설명**: OBD 기기를 꽂으면 자동으로 내 차 정보를 불러오고, 기기가 없어도 직접 모델을 선택해서 등록할 수 있습니다.
- **입력 데이터**: OBD 자동 인식 정보 또는 사용자 선택
- **출력 데이터**: 등록된 차량 정보

### 3. 검증 기준 (Acceptance Criteria)
- OBD 연결 시 별도 입력 없이 차종 정보가 자동 기입되어야 함.
- OBD 미연결 시 수동 선택 목록에서 차량을 선택하여 등록할 수 있어야 함.
</details>

<details>
<summary><b>[REQ-USER-02] 소모품 수명 예측</b></summary>

### 1. 기본 정보 (Metadata)
- **ID**: REQ-USER-02
- **분류**: 기능(Functional)
- **우선순위**: 필수(High)

### 2. 상세 내용 (Description)
- **요구사항 명칭**: 소모품 수명 예측
- **상세 설명**: 주행 거리가 같아도 운전 습관에 따라 소모품 상태는 다릅니다. 급가속/급제동이 잦은지 등을 분석해서 "내 운전 습관에 맞는" 교체 시기를 알려줍니다.
- **입력 데이터**: 누적 주행 거리, 운전 습관 점수
- **출력 데이터**: 잔여 수명 및 교체 추천일

### 3. 검증 기준 (Acceptance Criteria)
- 동일 차종, 동일 주행거리라도 과격하게 운전한 시뮬레이션 계정의 소모품 잔여 수명이 더 짧게 표시되어야 함.
</details>

<details>
<summary><b>[REQ-USER-03] 디지털 차계부</b></summary>

### 1. 기본 정보 (Metadata)
- **ID**: REQ-USER-03
- **분류**: 기능(Functional)
- **우선순위**: 낮음(Low)

### 2. 상세 내용 (Description)
- **요구사항 명칭**: 디지털 차계부
- **상세 설명**: 정비 내역을 기록하면 AI가 이를 인식해서 소모품 수명을 자동으로 초기화해줍니다.
- **입력 데이터**: 정비 기록 (날짜, 항목, 주행거리)
- **출력 데이터**: 업데이트된 정비 내역

### 3. 검증 기준 (Acceptance Criteria)
- 정비 내역 입력 후, 해당 소모품의 관리 상태가 '양호'로 즉시 변경되어야 함.
</details>

<details>
<summary><b>[REQ-USER-04] 주행 리포트 (Trip Report)</b></summary>

### 1. 기본 정보 (Metadata)
- **ID**: REQ-USER-04
- **분류**: 기능(Functional)
- **우선순위**: 필수(High)

### 2. 상세 내용 (Description)
- **요구사항 명칭**: 주행 리포트 (Trip Report)
- **상세 설명**: 시동을 끄면 방금 운전은 어땠는지, 차에 문제는 없는지 요약해서 보여줍니다.
- **입력 데이터**: 주행 요약 정보, AI 진단 결과
- **출력 데이터**: 주행 완료 리포트 화면

### 3. 검증 기준 (Acceptance Criteria)
- 시동을 끄고 1분 이내에 "OO님의 주행 리포트가 도착했습니다" 알림이 와야 함.
- 리포트에서 이번 주행의 최고 속도, 급정거 횟수, 그리고 차량 이상 유무를 확인할 수 있어야 함.
</details>

## 4. 시스템 및 인프라 (SYS)

<details>
<summary><b>[REQ-SYS-01] OBD 기기 바인딩</b></summary>

### 1. 기본 정보 (Metadata)
- **ID**: REQ-SYS-01
- **분류**: 보안(Security)
- **우선순위**: 필수(High)

### 2. 상세 내용 (Description)
- **요구사항 명칭**: OBD 기기 바인딩
- **상세 설명**: 다른 사람이 내 차 데이터를 함부로 보거나 조작하지 못하도록, 내 계정에 등록된 OBD 기기는 나만 연결할 수 있게 잠급니다.
- **입력 데이터**: 기기 고유 ID, 사용자 ID
- **출력 데이터**: 연결 허용 여부

### 3. 검증 기준 (Acceptance Criteria)
- **Locking Test**: A 계정에 등록된 OBD를 B 계정 앱에서 연결 시도 시, "이미 등록된 기기입니다" 에러 메시지와 함께 차단되어야 함.
- **Unlocking**: A 계정에서 '기기 삭제' 수행 후에는 B 계정에서 정상 등록되어야 함.
</details>

## 5. 확장 기능 (EXT)

<details>
<summary><b>[REQ-EV-01] EV/HEV 통합 지원 (Expansion)</b></summary>

### 1. 기본 정보 (Metadata)
- **ID**: REQ-EV-01
- **분류**: 기능/확장(Future)
- **우선순위**: 낮음(Extension) - 🟢

### 2. 상세 내용 (Description)
- **요구사항 명칭**: 전기차(EV) 및 하이브리드(HEV) 통합 지원
- **상세 설명**: 전기차의 생명인 배터리 상태(전압, 온도, 수명)를 엔진차와 똑같이 진단하고 관리해줍니다.
- **입력 데이터**: 배터리 데이터 (BMS), 제조사 연동 정보
- **출력 데이터**: 배터리 건강 리포트

### 3. 검증 기준 (Acceptance Criteria)
- EV 차종 선택 시 대시보드 UI가 RPM 게이지 대신 **Power/Charge 게이지** 및 **SoC(%)** UI로 변경되어야 함.
- 가상 시뮬레이터에서 배터리 온도 데이터를 60도 이상으로 보냈을 때 "냉각 시스템 점검" 경고가 뜨는지 확인.
</details>

<details>
<summary><b>[REQ-EXT-02] 영수증 OCR 입력 (Receipt OCR)</b></summary>

### 1. 기본 정보 (Metadata)
- **ID**: REQ-EXT-02
- **분류**: 확장(Expansion)
- **우선순위**: 낮음(Low)

### 2. 상세 내용 (Description)
- **요구사항 명칭**: 영수증 OCR 입력
- **상세 설명**: 정비소 영수증을 촬영하면 AI가 날짜, 항목(예: 엔진오일), 비용을 자동으로 인식하여 '디지털 차계부'에 입력해줍니다.
- **입력 데이터**: 영수증 사진
- **출력 데이터**: 추출된 정비 데이터 (항목, 금액, 날짜)

### 3. 검증 기준 (Acceptance Criteria)
- 영수증 사진 업로드 시, 텍스트 내에서 **'엔진오일'** 또는 **'필터'**와 같은 정비 항목이 정확히 분류되는지 확인.
- 추출된 금액이 영수증상의 결제 금액과 일치하는지 확인.
- 인식이 완료되면 사용자 확인 후 '디지털 차계부'에 자동으로 내역이 추가되어야 함.
</details>


