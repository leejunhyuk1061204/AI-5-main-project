spring:
  application:
    name: backend
  jackson:
    time-zone: Asia/Seoul

  datasource:
    url: jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:car_sentry}
    username: ${DB_USER:postgres}
    password: ${DB_PASSWORD:postgres}
    driver-class-name: org.postgresql.Driver

  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        format_sql: true

  batch:
    jdbc:
      initialize-schema: always # Batch 테이블 자동 생성
    job:
      enabled: false # 시작 시 모든 Job 실행 방지

  cloud:
    aws:
      region:
        static: ap-northeast-2
      credentials:
        access-key: ${AWS_ACCESS_KEY_ID:dummy}
        secret-key: ${AWS_SECRET_ACCESS_KEY:dummy}
      s3:
        enabled: true
      stack:
        auto: false

  rabbitmq:
    host: ${MQ_HOST:localhost}
    port: ${MQ_PORT:5672}
    username: ${MQ_USER:guest}
    password: ${MQ_PASSWORD:guest}
    listener:
      simple:
        concurrency: 2
        max-concurrency: 5
        retry:
          enabled: true
          initial-interval: 5000ms
          max-attempts: 3
          multiplier: 2.0



app:
  storage:
    type: ${STORAGE_TYPE:local} # local or s3
  firebase:
    config-path: ${FIREBASE_CONFIG_PATH:firebase-service-account.json}



logging:
  file:
    name: logs/backend.log
  level:
    org.hibernate.SQL: DEBUG
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE
    org.springframework.web: DEBUG # 404 디버깅용 로그 추가

# 암호화 키(코드는 가짜를 들고 있고, 서버가 진짜를 넣어주는 방식"이므로 보안상 안전함)
encryption:
  key: ${ENCRYPTION_KEY:car-sentry-default-key-32bytes-!!} # 32바이트 권장

jwt:
  secret: ${JWT_SECRET:vmb70atp-bd59-400a-9450-523a253d0a90-this-is-a-long-secret-key-for-development}
  access-expiration: 3600000 # 1시간 (테스트 완료 후 원복)
  refresh-expiration: 604800000 # 7일
